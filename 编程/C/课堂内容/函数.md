#C 

# 函数定义及参数

## 作用

1. 一个C程序有多个程序模块构成,每一个程序模块作为一个源程序文件.对于较大的程序,可以分别放在若干个源文件中,这样便于分别编写和编译.提高调试效率,一个源文件可以为多个程序共用.
2. 一个源程序文件由一个或者多个函数以及其他有关内容组成.一个源文件就是一个编译单位,在程序编译时是以源程序文件未单位进行编译的,而不是以函数为单位进行编译的.
3. C程序的执行是从main函数开始的,如果mian函数中调用其他函数,在调用后流程返回到main函数,在mian函数中结束整个程序的运行.
4. 所有函数都是平行的,在定义函数时时分别进行的,是相互独立的,即函数不能被嵌套定理,函数间可以相互调用,但不能调用主函数.

## 分类

### 从用户角度看

1. 库函数,由系统提供,用户不必自己定义,可以直接使用它们.
2. 用户自己定义的函数,是用与解决用户专门需要的函数.

### 从函数的形式看

1. 无参函数.在调用函数时,主调函数不向被调用函数传递数据
2. 有参函数.主调函数在调用被调用函数时,通过参数向被调用函数传递数据

### 从函数之间的关系分

1. 主调函数:提供数据,调用其他函数的计算结果
2. 被调函数:提供计算结果给主调函数

## 定义函数

所有的函数需要先定义,后使用.

定义函数需要包含以下内容:

1. 指定函数的名字,以便以后按名调用
2. 指定函数的类型,即函数返回值的类型
3. 指定函数的参数的名字和类型,以便调用函数时向他们传递数据,对无参函数不需要这项.
4. 指定函数应当完成什么操作,也就是函数是做什么的,即函数的功能.这是最重要的,是在函数体中解决的.

### 有参函数的定义

```C
类型标识符 函数名(类型 形参){
	变量说明语句;
	可执行语句;
}
```

# 函数调用及数据传递

## 调用函数

实参表中实参的个数多于一个时,各参数之间用逗号分隔.

1. 形参:被调函数的参数,在调用前没有确定的值
2. 实参:主调函数中,再调用函数被调函数前,必须有确定的值

实参的个数和类型必须与对应的形参一致.

1. 函数调用语句,不要求函数带回值,只要求函数完成一定的操作
2. 函数表达式,函数调用出现在另一个表达式中,这是要求函数带回一个确定的值参与表达式的运算
3. 函数参数,函数调用作为另一个函数调用时的实参

### 函数调用的过程

1. 在定义函数中指定的形参,再未出现函数调用时,并不占用空间,只有被调用,形参才被分配空间
2. 将实参的值传递给形参
3. 在执行函数期间,形参如果已经有值,可以利用它做有关操作
4. 通过return语句,将函数值带回主调函数
5. 调用结束,形参单元被释放.实参单元扔保留

### 函数的返回值

1. 函数的返回值是通过函数中的return实现的
2. 在定义函数时,指定的函数类型应该与return语句中的类型一致
3. 一个函数中如果有多个return,执行到第一个return结束函数调用,并生效这个return效果
4. 不返回值的函数应该定义为void类型

## 被调用函数的声明和函数原型

### 函数声明

1. 函数的声明可以放在变量定义部分
2. 若被调用函数的定义在主调用函数之后,就必须在主调函数的声明部分对被调用函数加以说明
3. 若被调用函数的返回值是整型或者字符型,可以省略函数说明
4. 若被调用函数和调用函数不在同一编译单位,应该进行函数说明
5. 可以放在函数外进行说明

### 函数原型

函数的首部

# 数据传递

1. 值传递,通过数据传递(单向)
2. 地址传递,通过地址传递(双向)
3. 全局传递,使用全局变量进行传递

## 值传递

1. 常量,普通变量,数组元素或表达式做实参,相应的实参


## 一维数组名做函数参数

1. 形参表示为等长数组形式
2. 形参表示为可变长数组形式
3. **形参定义为指针**

## 二维数组名做函数参数

1. 形参使用二维数组名
2. 形参说明成一维可调的二维数组
3. 形参定义为指向一维数组的一个指针变量，即数组指针


# 局部变量和全局变量

每个变量都有一个作用域问题,即他们在什么范围内有效.

## 局部变量

1. 在函数开头定义
2. 在函数内的复合语句内定义

- 在一个函数内部定义的变量只在本函数范围有效,只有在本函数内才能引用他们,在此函数以外是不能使用这些变量的
- 复合语句内定义的变量只在

## 全局变量

在函数外部定义.

- 程序的编译单位是源程序文件,一个源文件可以包含一个或若干个函数
- 在函数内定义的变量是局部变量,而在函数之外定义的变量称为外部变量,外部变量也是全局变量
- 全局变量可以为本文件中其他函数所共用.他的有效范围从定义变量的位置开始到本源文件结束.
- 全局变量作用是用来在其后的多个函数之间传递数据

- 设置全局变量的作用是增加了函数间数联系的渠道
- 如果所有函数都能引用全局变量的值,因此一个函数对其的修改,会影响其他函数,所以其是直接的传递通道
- 由于函数的调用只能带回一个函数的返回值有时可以通过其搭建函数间沟通渠道.

可以使用extern变量对外部变量进行声明,表示把外部变量的作用域扩展到此位置.声明的时候可以不写明数据的类型.如果需要跨文件进行变量的使用,也可以使用extern进行声明.
如果希望某些变量只被本文件使用,而不被其他文件使用,可以在定义外部变量时,外加static声明.

但是不建议使用全局变量:

1. 全局变量在程序的全部执行过程都占用存储单元
2. 它使函数的通用性降低,执行情况会受到有关外部变量的影响,如果讲一个函数一到另一个文件中.还要考虑吧有关外部变量的值一起已过去,但是若该外部变量与其他文件的变量重名,会出现问题.降低了程序的可靠性和通用性
3. 使用全局变量过多,会降低程序的清晰性.不同函数都可以对其更改,程序容易出错.
4. 如果某函数内的局部变量重名,则该函数内全局变量不起作用.

# 变量的储存方式和生存期

从变量存在时间,即生存期,来看下,有的变量在程序运行的整个过程存在,有的变量只有临时存在.


## 动态存储方式

程序运行期间根据需要进行动态分配存储空间的方式.

1. 函数形式参数,在调用函数的时候,给形参分配存储空间
2. 函数定义的没有用关键字static声明的变量,即自动变量
3. 函数调用的现场保护和返回地址
4. 函数执行分配,结束进行释放
5. 他们的生命周期时整个程序生命周期的一部分

## 静态存储方式

程序运行期间由系统分配固定的存储空间的方式.
全局变量全部存放在静态存储区,在程序开始执行时给全局变量分配存储区,程序执行完毕就释放.程序执行过程中,他们占据固定的存储单元,而不是动态的进行分配和释放.

## 存储类别

在C语言中,每一个变量和函数都有两个属性:数据类型和数据的存储类型.

### 自动变量

- 函数中的局部变量,都是动态的分配存储空间,数据存储在动态存储区
- 形参和函数中的局部变量都属于自动变量
- 在调用函数时,系统给自动变量分配空间,结束后,自动释放

### 静态变量

1. 用关键字声明static声明的变量
2. 直至程序结束才会释放static变量
3. 静态变量自动赋初值为0
4. 静态变量在函数调用后不是放所占空间,其值仍保留在内存中,可重复使用,直至程序结束
5. 静态变量的赋值语句只执行一次,在一个函数内初始化不能被其他函数使用

### 寄存器变量

1. 一般情况下,变量的值是存放在内存中的
2. 有一些变量使用频繁,存取变量要花费很多时间,为提高执行效率,允许把局部变量存放在寄存器中
3. 实际上,由于编译器能够识别频繁识别的变量,进行优化,使用寄存器变量register用处有限

### 总结

1. 自动变量存放在动态存储区
2. 静态变量存放在静态存储区
3. 寄存器变量存放在CPU寄存器

## 总结

1. 从作用域可以分为局部变量和全局变量
2. 全局变量一般无寄存器类型
3. 从生存周期可以分为动态存储和静态存储,静态存储时程序在整个程序周期有效,动态存储当使用结束即销毁
4. 从存储位置可以分为静态存储区,动态存储区和寄存器
5. static对局部变量和全局变量的作用不同

### 关于变量的声明和定义

- 在声明部分出现的变量有两种情况,一种需要建立存储空间,一种不需要.
- 前者是定义性声明,后者成为引用性声明
- 一般把建立存储空间的声明称定义,而把不需要建立存储空间的声明成为声明
- 外部变量定义和外部变量声明含义不同
- 外部变量的定义只能有一次,位置在所有函数之外
- 同一文件可以多次声明
- 系统根据外部变量定义进行内存空间的分配

## 内部函数和外部函数

- 函数本质上是全局的,因为定义一个函数的目的就是被另外函数调用
- 如果不加声明,一个文件中的函数可以被本文件其他函数调用
- 可以指定一些函数不能被其他文件进行调用
- 函数是否能被其他文件进行调用,可以进行定义static

# 函数的递归调用

在调用一个函数的过程中,直接或间接调用函数本身,被称为函数的递归调用.
程序中不应该出现无限的递归调用,只应该出现有限次数,有终止的递归调用.


# 命令行程序